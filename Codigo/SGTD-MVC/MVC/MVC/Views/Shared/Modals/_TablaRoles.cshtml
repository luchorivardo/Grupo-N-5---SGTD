@model IEnumerable<MVC.Models.DTOs.RolDto.RolReadDTO>

<link rel="stylesheet" href="~/css/modal.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/indexBase.css" asp-append-version="true" />
<div>
	<div class="tapa"></div>
	<div class="proveedores-table-wrapper">
		<table class="proveedores-table">
			<thead>
				<tr>
					<th>Nombre</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				@if (Model != null && Model.Any())
				{
					foreach (var rol in Model)
					{
						<tr data-id="@rol.Id">
							<td class="nombre-rol">@rol.Nombre</td>
							<td style="width: 200px;">
								<button class="btn btn-sm btn-modificar">Modificar</button>
								<button class="btn btn-sm btn-eliminar">Eliminar</button>
							</td>
						</tr>
					}
				}
				else
				{
					<tr>
						<td colspan="2">No hay roles cargados</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>
@section Scripts {
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const table = document.querySelector(".proveedores-table");
			const wrapper = document.querySelector(".proveedores-table-wrapper");

			if (table && wrapper) {
				function ajustarBordes() {
					// comparo el alto del contenido contra el máximo del wrapper
					if (table.scrollHeight > 400) {
						// quitar bordes inferiores
						table.querySelector("tbody tr:last-child td:first-child")?.style.setProperty("border-radius", "0 0 0 0");
						table.querySelector("tbody tr:last-child td:last-child")?.style.setProperty("border-radius", "0 0 0 0");
					} else {
						// restaurar bordes redondeados normales
						table.querySelector("tbody tr:last-child td:first-child")?.style.setProperty("border-radius", "0 0 0 7px");
						table.querySelector("tbody tr:last-child td:last-child")?.style.setProperty("border-radius", "0 0 7px 0");
					}
				}

				// correr al cargar
				ajustarBordes();

				// correr también si cambia el tamaño de la ventana (por si se ajusta el layout)
				window.addEventListener("resize", ajustarBordes);
			}
		});
	</script>
}